---
import { getCollection, type CollectionEntry } from "astro:content";
import PostSection from "../../../components/mdx/PostSection.astro";
import PostHeader from "../../../components/mdx/PostHeader.astro";
import PostText from "../../../components/mdx/PostText.astro";
import Figure from "../../../components/mdx/Figure.astro";
import ImageCarousel from "../../../components/mdx/ImageCarousel.astro";
import Video from "../../../components/mdx/Video.astro";
import Divider from "../../../components/Divider.astro";

export async function getStaticPaths() {
  const projects = await getCollection("projects");
  return projects.map((project) => ({
    params: { slug: project.slug },
    props: { project },
  }));
}

interface Props {
  project: CollectionEntry<"projects">;
}

const { project } = Astro.props as Props;
const { Content } = await project.render();
---

<div class="post-page">
  <Content components={{ PostSection, PostHeader, PostText, Figure, ImageCarousel, Video, Divider }} />
</div>

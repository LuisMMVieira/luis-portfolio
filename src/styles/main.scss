@import './reset.scss';
@import './fonts.scss';
@import './tokens.scss';
@import './grid.scss';
@import './global.scss';
@import './post.scss';

/* ─────────────────────────────────────────
	 Section: Intro
	 ───────────────────────────────────────── */

.section#intro {
	min-height: 100svh;
	position: relative;

	.flow > * + * {
		margin-top: var(--spacing-md);
	}

	.flow > .intro-statuses {
		margin-top: 0;
	}

	h1 {
		position: relative;
		display: flex;
		flex-direction: column;
		gap: var(--spacing-sm);
		max-width: none;

		span {
			display: block;
		}
	}

	.intro-headline {
		text-wrap: balance;
		hyphens: none;
		font-size: var(--type-title-m-font-size);
		line-height: var(--type-title-m-line-height);
		letter-spacing: var(--type-title-m-letter-spacing);
		max-width: 100%;
	}

	.intro-greeting {
		position: relative;
		top: 0;
		font-size: var(--type-title-s-font-size);
		line-height: var(--type-title-s-line-height);
		letter-spacing: var(--type-title-s-letter-spacing);
	}
}

/* ─────────────────────────────────────────
	 Intro: Status indicators
	 ───────────────────────────────────────── */

.intro-statuses {
	display: flex;
	flex-direction: column;
	gap: var(--spacing-xxs);
	position: absolute;
	bottom: var(--spacing-xxxl);
	left: var(--grid-margin-xs);
}

.intro-status {
	display: flex;
	align-items: center;
	gap: var(--spacing-xs);
}

.intro-status__dot {
	width: 4px;
	height: 4px;
	border-radius: 50%;
	background: var(--text-secondary);
	flex-shrink: 0;

	&--green {
		background: #34c759;
		box-shadow: 0 0 4px #34c759;
	}
}

.intro-status__text {
	font-family: var(--type-text-s-font-family);
	font-size: var(--type-text-s-font-size);
	line-height: var(--type-text-s-line-height);
	color: var(--text-secondary);

	a {
		color: var(--text-secondary);
		text-decoration: underline;
	}
}

/* ─────────────────────────────────────────
	 Intro: Scroll hint (xl only)
	 ───────────────────────────────────────── */

.intro-scroll-hint {
	display: none;
}

/* ─────────────────────────────────────────
	 Section: Work (Figma Home Section 1142:793)
	 ───────────────────────────────────────── */

.section#work .flow {
	/* xs / md: 120px top, 56px bottom */
	padding-block-start: var(--spacing-huge);
	padding-block-end: var(--spacing-xxl);
}

.projects-list {
	display: flex;
	flex-direction: column;
}

/* Divider between projects: xs/md */
.section#work .divider--work {
	padding-block-start: var(--spacing-xxl);
	padding-block-end: var(--spacing-lg);
}

/* ─────────────────────────────────────────
	 Section: Beliefs
	 ───────────────────────────────────────── */

.section#beliefs {
	.flow {
		> * + * {
			margin-top: var(--spacing-xxl);
		}
	}

	p {
		font-family: var(--type-title-m-font-family);
		font-size: var(--type-title-m-font-size);
		font-weight: var(--type-title-m-font-weight);
		line-height: var(--type-title-m-line-height);
		letter-spacing: var(--type-title-m-letter-spacing);
		color: var(--text-primary);
	}

	.emphasis {
		color: var(--color-emphasis);
	}
}

/* ─────────────────────────────────────────
	 Section: Background
	 ───────────────────────────────────────── */

.section#background {
	h3 {
		max-width: 200px;
	}

	h3 + * {
		margin-top: 0;
	}

	.bg-chapter + .bg-chapter {
		margin-top: var(--spacing-xl);
	}
}

.bg-chapter {
	display: flex;
	flex-direction: column;
	gap: var(--spacing-md);
}

/* ─────────────────────────────────────────
	 Section: About
	 ───────────────────────────────────────── */

.section#about {
	/* Text is primary (white) on purple bg */
	p {
		color: var(--text-primary);
	}

	h3 {
		font-size: var(--type-title-m-font-size);
		line-height: var(--type-title-m-line-height);
		letter-spacing: var(--type-title-m-letter-spacing);
	}

	.flow {
		> * + * {
			margin-top: var(--spacing-xl);
		}
	}
}

.about-photo {
	width: 100%;

	img {
		width: 100%;
		height: auto;
		display: block;
	}
}

.about-contact {
	display: flex;
	flex-wrap: wrap;
	align-items: center;
	gap: 4px 12px;
	font-family: var(--type-text-m-font-family);
	font-size: var(--type-text-m-font-size);
	line-height: var(--type-text-m-line-height);
}

.about-contact__label {
	color: var(--text-primary);
	opacity: 0.5;
}

.about-contact__separator {
	color: var(--text-primary);
	opacity: 0.5;
}

.about-contact__email-wrap {
	position: relative;
}

.about-contact__tooltip {
	position: absolute;
	left: 50%;
	bottom: calc(100% + var(--spacing-xs));
	transform: translateX(-50%);
	padding: var(--spacing-xs) var(--spacing-sm);
	font-family: var(--type-text-s-font-family);
	font-size: var(--type-text-s-font-size);
	line-height: var(--type-text-s-line-height);
	color: var(--text-primary);
	background: var(--bg-elevated);
	border: var(--border-width-hairline) solid var(--border-default);
	border-radius: var(--radius-xs);
	white-space: nowrap;
	opacity: 0;
	visibility: hidden;
	transition: opacity 0.2s ease, visibility 0.2s ease;
	pointer-events: none;
	z-index: 1;

	&.is-visible {
		opacity: 1;
		visibility: visible;
	}
}

.about-contact__link {
	color: var(--text-primary);
	text-decoration: underline;
	text-decoration-thickness: var(--border-width-hairline);
	text-underline-offset: 0.15em;

	&--dotted {
		text-decoration-style: dotted;
	}
}

/* ─────────────────────────────────────────
	 Flow (heading-adjacent spacing only; no global sibling margin)
	 ───────────────────────────────────────── */

.flow {
	h2 + * {
		margin-top: var(--spacing-sm);
	}

	h3 + * {
		margin-top: var(--spacing-xs);
	}
}

/* ─────────────────────────────────────────
	 Divider (site-wide)
	 ───────────────────────────────────────── */

.divider {
	display: flex;
	flex-direction: column;
	gap: var(--spacing-xs);
	width: 100%;
	margin: 0;
}

/* Spacing modifiers (token-based, no inline styles) */
$spacing-keys: none, xxxs, xxs, xs, sm, md, lg, xl, xxl, xxxl, huge, max;
@each $key in $spacing-keys {
	.divider--above-#{$key} {
		padding-block-start: var(--spacing-#{$key});
	}
	.divider--below-#{$key} {
		padding-block-end: var(--spacing-#{$key});
	}
}

.divider__line {
	width: 100%;
	height: var(--border-width-hairline);
	background-color: var(--border-default);
}

.divider__label {
	font-family: var(--type-text-m-font-family);
	font-size: var(--type-text-m-font-size);
	font-weight: var(--type-text-m-font-weight);
	line-height: var(--type-text-m-line-height);
	color: var(--text-primary);
	margin: 0;
}

/* ─────────────────────────────────────────
	 Media Queries — Tablet (md) 48rem / 768px
	 ───────────────────────────────────────── */

@media (min-width: 48rem) {
	.section#intro {
		h1 {
			gap: var(--spacing-md);
		}

		.intro-headline {
			font-size: var(--type-title-l-font-size);
			line-height: var(--type-title-l-line-height);
			letter-spacing: var(--type-title-l-letter-spacing);
		}

		.intro-greeting {
			position: absolute;
			font-size: var(--type-title-m-font-size);
			line-height: var(--type-title-m-line-height);
			top: calc(
				-1 * (var(--type-title-m-font-size) * var(--type-title-m-line-height) + var(--spacing-md))
			);
		}
	}

	.intro-statuses {
		flex-direction: row;
		gap: var(--spacing-md);
		left: 50%;
		transform: translateX(-50%);
		bottom: var(--spacing-xl);
	}

	.section#beliefs {
		p {
			font-size: var(--type-title-l-font-size);
			line-height: var(--type-title-l-line-height);
			letter-spacing: var(--type-title-l-letter-spacing);
		}
	}

	.section#background {
		h3 {
			font-size: var(--type-title-m-font-size);
			line-height: var(--type-title-m-line-height);
			letter-spacing: var(--type-title-m-letter-spacing);
		}
	}

	.section#work .divider--work {
		padding-block-start: var(--spacing-xxl);
		padding-block-end: var(--spacing-lg);
	}

	.section#about {
		h3 {
			font-size: var(--type-title-l-font-size);
			line-height: var(--type-title-l-line-height);
			letter-spacing: var(--type-title-l-letter-spacing);
		}
	}
}

/* ─────────────────────────────────────────
	 Media Queries — Desktop (xl) 75rem / 1200px
	 ───────────────────────────────────────── */

@media (min-width: 75rem) {
	/* Intro */
	.section#intro {
		min-height: 100vh;

		h1 {
			gap: var(--spacing-lg);
			max-width: none;
		}

		.intro-headline {
			position: relative;
			top: -8px;
			font-size: var(--type-title-xl-font-size);
			line-height: var(--type-title-xl-line-height);
			letter-spacing: var(--type-title-xl-letter-spacing);
		}

		.intro-greeting {
			font-size: var(--type-title-m-font-size);
			line-height: var(--type-title-m-line-height);
			letter-spacing: var(--type-title-m-letter-spacing);
			top: calc(
				-1 * (var(--type-title-m-font-size) * var(--type-title-m-line-height) + var(--spacing-lg))
			);
		}
	}

	.intro-statuses {
		flex-direction: row;
		gap: var(--spacing-md);
		top: var(--spacing-md);
		right: var(--spacing-md);
		left: auto;
		bottom: auto;
		transform: none;
		margin: 0;
	}

	.intro-scroll-hint {
		display: flex;
		align-items: center;
		justify-content: center;
		gap: var(--spacing-sm);
		position: absolute;
		bottom: var(--spacing-xl);
		left: 50%;
		transform: translateX(-50%);
		transition: opacity 0.3s ease;

		&.is-hidden {
			opacity: 0;
			pointer-events: none;
		}
	}

	.intro-scroll-hint__brace {
		font-family: var(--type-text-m-font-family);
		font-size: var(--type-text-m-font-size);
		line-height: var(--type-text-m-line-height);
		color: var(--color-emphasis);
	}

	.intro-scroll-hint__text {
		font-family: var(--type-text-s-font-family);
		font-size: var(--type-text-s-font-size);
		line-height: var(--type-text-s-line-height);
		color: var(--text-secondary);
	}

	/* Section spacing: xl uses 200px top, 120px bottom (Figma Home Section) */
	.section#work .flow,
	.section#beliefs .flow,
	.section#background .flow,
	.section#about .flow {
		padding-block-start: var(--spacing-max);
		padding-block-end: var(--spacing-huge);
	}

	.section#work .divider--work {
		padding-block-start: var(--spacing-huge);
		padding-block-end: var(--spacing-xl);
	}

	/* Background: side-by-side layout at xl */
	.bg-chapter {
		flex-direction: row;
		gap: var(--spacing-xxl);

		h3 {
			flex: 1;
		}

		p {
			flex: 1;
		}
	}
}
